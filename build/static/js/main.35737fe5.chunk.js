(this["webpackJsonpsea-battle"]=this["webpackJsonpsea-battle"]||[]).push([[0],{12:function(t,e,a){},13:function(t,e,a){"use strict";a.r(e);var s=a(0),i=a.n(s),r=a(6),n=a.n(r),o=(a(12),a(1)),l=a(2),h=a(4),c=a(3),u=function(t){Object(h.a)(a,t);var e=Object(c.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"information"},i.a.createElement("div",{className:"information__title title",title:this.props.title},this.props.title),i.a.createElement("div",{className:"information__subtitle",title:this.props.description},this.props.description))}}]),a}(i.a.Component),m=function(t){Object(h.a)(a,t);var e=Object(c.a)(a);function a(t){var s;Object(o.a)(this,a),(s=e.call(this,t)).listOfShips=[4,3,3,2,2,2,1,1,1,1];var i=[],r=[];s.wasAlreadyShoot=[];for(var n=0;n<10;n++){i[n]=[],s.wasAlreadyShoot[n]=[],r[n]=[];for(var l=0;l<10;l++)i[n][l]=0,s.wasAlreadyShoot[n][l]=!1}return s.state={listOfShips:s.listOfShips,arraySquare:i,type:s.props.type,arraySquareLength:10,listOfPlacesShips:r,needClick:s.props.needClick},s}return Object(l.a)(a,[{key:"positionShips",value:function(){for(var t=0;t<this.listOfShips.length;t++){var e=this.randomPlace(t),a=0,s=0;1==e.shipPosition?(a=e.startX+this.listOfShips[t]>=9?9:e.startX+this.listOfShips[t],s=e.startY+1>=9?9:e.startY+1):(a=e.startX+1>=9?9:e.startX+1,s=e.startY+this.listOfShips[t]>=9?9:e.startY+this.listOfShips[t]);for(var i=0==e.startX?0:e.startX-1,r=0==e.startY?0:e.startY-1,n=i;n<=a;n++)for(var o=r;o<=s;o++)this.state.arraySquare[n][o]=2,this.setState({arraySquare:this.state.arraySquare});if(1==e.shipPosition)for(var l=e.startX;l<e.startX+this.state.listOfShips[t];l++)this.state.arraySquare[l][e.startY]=1,this.state.listOfPlacesShips[t].push("".concat(l,"x").concat(e.startY)),this.setState({arraySquare:this.state.arraySquare,listOfPlacesShips:this.state.listOfPlacesShips});else for(var h=e.startY;h<e.startY+this.state.listOfShips[t];h++)this.state.arraySquare[e.startX][h]=1,this.state.listOfPlacesShips[t].push("".concat(e.startX,"x").concat(h)),this.setState({arraySquare:this.state.arraySquare,listOfPlacesShips:this.state.listOfPlacesShips})}}},{key:"randomPlace",value:function(t){var e=0,a=0,s=this.getRandom(1);return 0==s?(e=this.getRandom(9),a=this.getRandom(9-this.listOfShips[t])):(e=this.getRandom(9-this.listOfShips[t]),a=this.getRandom(9)),this.checkPositionShip(t,e,a,s)?{startX:e,startY:a,shipPosition:s}:this.randomPlace(t)}},{key:"checkPositionShip",value:function(t,e,a,s){var i=0==e?0:e-1,r=0==a?0:a-1,n=0,o=0;1==s?(n=e+this.listOfShips[t]>=9?9:e+this.listOfShips[t],o=a+1>=9?9:a+1):(n=e+1>=9?9:e+1,o=a+this.listOfShips[t]>=9?9:a+this.listOfShips[t]);for(var l=i;l<=n;l++)for(var h=r;h<=o;h++)if(1==this.state.arraySquare[l][h])return!1;return!0}},{key:"getRandom",value:function(t){return Math.floor(Math.random()*(t+1))}},{key:"shootShip",value:function(t,e){var a=this;e.split("x",2);"computer"==this.state.type?(this.props.changeTurn("computer"),setTimeout((function(){return a.props.computerStep(t)}),1e3)):(this.props.changeTurn("player"),this.props.computerStepEnd())}},{key:"randomShoot",value:function(){var t=this.getRandom(9),e=this.getRandom(9);return this.checkRandomShoot(t,e)?(this.wasAlreadyShoot[t][e]=!0,{index1:t,index2:e}):this.randomShoot()}},{key:"checkRandomShoot",value:function(t,e){if(0==this.wasAlreadyShoot[t][e])return!0}},{key:"componentWillMount",value:function(){this.positionShips()}},{key:"componentWillReceiveProps",value:function(t){this.setState({needClick:t.needClick})}},{key:"createSquares",value:function(){var t=this,e=[];if(this.state.needClick){var a=this.randomShoot();e=this.state.arraySquare.map((function(e,s){return i.a.createElement("div",{className:"field__row"},e.map((function(e,r){return i.a.createElement(p,{id:t.state.type+s+"\u0445"+r,findID:t.state.type+a.index1+"\u0445"+a.index2,value:e,wasShoot:!0,wasAlreadyShoot:!0,type:t.state.type})})))})),this.shootShip(void 0,"".concat(a.index1,"x").concat(a.index2))}else e=this.state.arraySquare.map((function(e,a){return i.a.createElement("div",{className:"field__row"},e.map((function(e,s){return i.a.createElement(p,{id:t.state.type+a+"\u0445"+s,value:e,wasShoot:!1,wasAlreadyShoot:!1,type:t.state.type,shootShip:t.shootShip.bind(t)})})))}));return e}},{key:"render",value:function(){var t=this.createSquares();return i.a.createElement("div",{className:"field"+" field_".concat(this.state.type)},t)}}]),a}(i.a.Component),p=function(t){Object(h.a)(a,t);var e=Object(c.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={id:t.id,key:t.id,value:t.value,wasShoot:t.wasShoot,wasAlreadyShoot:t.wasAlreadyShoot||!1,type:t.type},s}return Object(l.a)(a,[{key:"handleClick",value:function(t){0==this.state.wasAlreadyShoot?(this.setState({wasShoot:!0,wasAlreadyShoot:!0}),this.props.shootShip(t,this.state.id)):alert("\u0412\u044b \u0443\u0436\u0435 \u0441\u0442\u0440\u0435\u043b\u044f\u043b\u0438 \u0432 \u044d\u0442\u0443 \u0442\u043e\u0447\u043a\u0443")}},{key:"componentWillReceiveProps",value:function(t){"player"==this.state.type&&t.findID&&this.state.id==t.findID&&this.setState({wasShoot:!0,wasAlreadyShoot:!0})}},{key:"render",value:function(){return"player"==this.state.type?i.a.createElement("div",{className:"square field__square field__square_player",id:this.state.id},1==this.state.value?i.a.createElement("div",{className:"square__shoot_player"},i.a.createElement("img",{className:this.state.wasShoot?"square__shoot":"square__shoot disable",src:"../img/dagger.png"})):i.a.createElement("div",null,i.a.createElement("img",{className:this.state.wasShoot?"square__shoot":"square__shoot disable",src:"../img/dot.png"}))):i.a.createElement("div",{className:"square field__square field__square_computer",id:this.state.id,onClick:this.handleClick.bind(this)},1==this.state.value?i.a.createElement("img",{className:this.state.wasShoot?"square__shoot":"square__shoot disable",src:"../img/dagger.png"}):i.a.createElement("img",{className:this.state.wasShoot?"square__shoot":"square__shoot disable",src:"../img/dot.png"}))}}]),a}(i.a.Component),d=function(t){Object(h.a)(a,t);var e=Object(c.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={formIsActive:!0,whoseTurn:"player",needClick:t.needClick,userFullName:"You",computerFullName:"John",fields:["player","computer"]},s}return Object(l.a)(a,[{key:"computerStep",value:function(t){console.log("computerStep"),this.setState({needClick:!0}),t.stopPropagation()}},{key:"computerStepEnd",value:function(){console.log("computerStepEnd"),this.setState({needClick:!1})}},{key:"userFullnameOnChange",value:function(t){this.setState({userFullName:t.target.value})}},{key:"computerFullnameOnChange",value:function(t){this.setState({computerFullName:t.target.value})}},{key:"readNames",value:function(t){t.preventDefault(),t.stopPropagation(),this.setState({formIsActive:!1})}},{key:"changeTurn",value:function(t){this.setState({whoseTurn:t})}},{key:"render",value:function(){var t="player"==this.state.whoseTurn?"\u0412\u0430\u0448 \u0445\u043e\u0434, \u0441\u0443\u0434\u0430\u0440\u044c "+this.state.userFullName:"\u0425\u043e\u0434\u0438\u0442 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 "+this.state.computerFullName;return i.a.createElement("div",{className:"shell"},i.a.createElement(u,{title:"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439",description:"\u0421\u044b\u0433\u0440\u0430\u0435\u043c?"}),i.a.createElement("form",{id:"form-names",className:this.state.formIsActive?"shell__form-names form-names":"disable"},i.a.createElement("p",{className:"form-names__string"},i.a.createElement("label",{className:"form-names__label form-label",htmlFor:"input-add-fullname"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f"),i.a.createElement("input",{className:"form-names__input form-input",id:"input-user-fullname",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430",value:this.state.userFullName,onChange:this.userFullnameOnChange.bind(this)})),i.a.createElement("p",{className:"form-names__string"},i.a.createElement("label",{className:"form-names__label form-label",htmlFor:"input-add-fullname"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430"),i.a.createElement("input",{className:"form-names__label form-input",id:"input-computer-fullname",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430",value:this.state.computerFullName,onChange:this.computerFullnameOnChange.bind(this)})),i.a.createElement("p",{className:"form-names__string"},i.a.createElement("input",{className:"form-names__button form-button",type:"submit",id:"add-person-button",name:"add-person-button",value:"\u041a \u0431\u043e\u044e!",onClick:this.readNames.bind(this)}))),i.a.createElement("div",{className:"shell_whoIsNext"},t),i.a.createElement("div",{id:"container",className:"shell__container"},i.a.createElement(m,{type:"player",needClick:this.state.needClick,computerStepEnd:this.computerStepEnd.bind(this),changeTurn:this.changeTurn.bind(this)}),i.a.createElement(m,{type:"computer",needClick:!1,computerStep:this.computerStep.bind(this),computerStepEnd:this.computerStepEnd.bind(this),changeTurn:this.changeTurn.bind(this)})))}}]),a}(i.a.Component),f=function(t){Object(h.a)(a,t);var e=Object(c.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={battle:[1]},s}return Object(l.a)(a,[{key:"newGame",value:function(t){}},{key:"render",value:function(){return i.a.createElement("div",null,this.state.battle.map((function(t){return i.a.createElement(d,{id:t,needClick:!1})})),i.a.createElement("div",null,i.a.createElement("input",{className:"shell__button form-button",type:"submit",id:"newStart",value:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e (\u044f \u0435\u0441\u0442\u044c, \u043d\u043e \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e)",onClick:this.newGame.bind(this)})))}}]),a}(i.a.Component);n.a.render(i.a.createElement(f,null),document.getElementById("wrapper"))},7:function(t,e,a){t.exports=a(13)}},[[7,1,2]]]);
//# sourceMappingURL=main.35737fe5.chunk.js.map